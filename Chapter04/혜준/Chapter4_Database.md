# 4.1. 데이터베이스의 기본

### 데이터베이스(DB, DataBase)

❓ 일정한 규칙, 규약을 통해 구조화되어 저장되는 데이터의 모음
- 실시간 접근과 동시 공유 가능
- 데이터베이스 안에 있는 데이터들은 특정 DBMS마다 정의된 **쿼리 언어**(query language)를 통해 삽입, 삭제, 수정, 조회 등을 수행할 수 있음

|응용 프로그램(Node.js/php)|
|:---:|
|↕|
|DBMS(MySQL)|
|↕|
|데이터베이스|

## 4.1.1. 엔터티(entity)

❓ 사람, 장소, 물건, 사건, 개념 등 여러 개의 속성을 지닌 명사를 의미
> ex) 엔터티: 회원 / 속성: 이름, 아이디, 주소, 전화번호 등...

### 약한 엔터티와 강한 엔터티

- A가 혼자서는 존재하지 못하고 B의 존재 여부에 따라 종속적이라면 A는 약한 엔터티, B는 강한 엔터티
> 방: 약한 엔터티 / 건물: 강한 엔터티   ➡ 방은 건물 안에만 존재하기 때문

## 4.1.2. 릴레이션(relation)

❓ 데이터베이스에서 정보를 구분하여 저장하는 기본 단위
- 엔터티에 관한 데이터를 데이터베이스는 릴레이션 하나에 담아서 관리
> 테이블: 관계형 데이터베이스에서의 릴레이션 <br>
> 컬렉션: NoSQL 데이터베이스에서의 릴레이션

### 테이블과 컬렉션

-데이터베이스의 종류: `관계형 데이터베이스`, `NoSQL`
-**MySQL**(관계형 데이터베이스)의 구조: 레코드-테이블-데이터베이스
-**MongoDB**(NoSQL)의 구조: 도큐먼트-컬렉션-데이터베이스
- 레코드➡테이블➡데이터베이스
![image](https://user-images.githubusercontent.com/70474860/219865490-3946ec50-97f4-46d9-970d-8b0a6a47760c.png)

## 4.1.3. 속성(attribute)

❓ 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보

## 4.1.4. 도메인(domain)

❓ 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합

## 4.1.5. 필드와 레코드

member
|name|ID|address|phonenumber|
|:---:|:---:|:---:|:---:|
|큰돌|kundol|서울|112|
|가영|kay|대전|114|
|빅뱅|big|카이루|119|
|...|...|...|...|

- 회원이란 엔터티는 member라는 테이블로 속성인 이름, 아이디 등을 가지고 있으며 name, ID, address 등의 **필드**를 가짐
- 이 테이블에 쌓이는 행(row) 단위의 데이터를 **레코드** 또는 **튜플**이라고 함

### 필드 타입

- 필드는 타입을 가짐
- 숫자 타입: `TINYINT`, `SMALLINT`, `MEDIUMINT`, `INT`, `BIGINT`
- 날짜 타입: `DATE`, `DATETIME`, `TIMESTAMP`
- 문자 타입: `CHAR`, `VARCHAR`, `TEXT`, BLOB`, `ENUM`, `SET`

## 4.1.6. 관계

- **1:1 관계**: 유저:유저 이메일
- **1:N 관계**: 쇼핑몰의 장바구니(유저:상품)
- **N:M 관계**: 수강신청(학생:강의)
> N:M 관계는 테이블 두 개를 직접적으로 연결해서 구축하지 않고 1:N, 1:M 관계를 갖는 테이블 두 개로 나눠서 설정함

## 4.1.7. 키
`기본키`, `외래키`, `후보키`, `슈퍼키`, `대체키`

![image](https://user-images.githubusercontent.com/70474860/219866253-305c6b57-1987-4d89-9611-e17e856961db.png)

### 기본키(Primary Key:PK)
- 유일성, 최소성 만족하는 키
- 테이블의 데이터 중 **고유**하게 존재하는 속성
- 자연키 또는 인조키 중에 골라 설정

> ✔ **자연키**: 중복된 값들을 제외하며 중복되지 않는 것을 '자연스레' 뽑다가 나오는 키. 언젠가는 변하는 속성을 가짐. <br>
> ✔ **인조키**: 인위적으로 생성한 키. 자연키와는 대조적으로 변하지 않으므로 보통 기본키는 인조키로 설정

### 외래키(Foreign Key:FK)

- 다른 테이블의 기본키를 그대로 참조하는 값으로 개체와의 관계를 식별하는 데 사용
- 중복되어도 괜찮음

### 후보키(candidate key)
- 기본키가 될 수 있는 후보들이며 유일성과 최소성을 동시에 만족하는 키

### 대체키(alternate key)
- 후보키가 두 개 이상일 경우 어느 하나를 기본키로 지정하고 남은 후보키들을 말함

### 슈퍼키(super key)
- 각 레코드를 유일하게 식별할 수 있는 유일성을 갖춘 

# 4.2. ERD와 정규화 과정

❓ **ERD**(Entity Relationship Diagram): 데이터베이스를 구축할 때 가장 기초적인 뼈대 역할을 하며, 릴레이션 간의 관계들을 정의한 것

## 4.2.1. ERD의 중요성
- ERD는 시스템의 요구 사항을 기반으로 작성되며 이 ERD를 기반으로 데이터베이스를 구축
- 디버깅 또는 비즈니스 프로세스 재설계가 필요한 경우에 설계도 역할 담당
- 장점: 관계형 구조로 표현할 수 있는 데이터를 구성하는 데 유용
- 단점: 비정형 데이터를 충분히 표현할 수 없음

> ✔ **비정형 데이터**: 비구조화 데이터를 말하며, 미리 정의된 데이터 모델이 없거나 미리 정의된 방식으로 정리되지 않은 정보

## 4.2.3. 정규화 과정

❓ 릴레이션 간의 잘못된 종속 관계로 인해 데이터베이스 이상 현상이 일어나서 이를 해결하거나, 저장 공간을 효율적으로 사용하기 위해 릴레이션을 여러 개로 분리하는 과정

### 정규형 원칙

- 더 좋은 구조
- 자료의 중복성 ⬇
- 독립적인 관계를 별개의 릴레이션으로 표현
- 각각의 릴레이션은 독립적인 표현이 가능

### 제1정규형

- 릴레이션의 모든 도메인이 더 이상 분해될 수 없는 원자 값(atomic value)만으로 구성되어야 함
- 릴레이션의 속성 값 중에서 한 개의 기본키에 대해 두 개 이상의 값을 가지는 반복 집합이 있으면 ❌
- 반복 집합 존재 ➡ 제거
- ![image](https://user-images.githubusercontent.com/70474860/219867019-406827df-ea19-4d63-bf53-9bfe497f6602.png)

### 제2정규형

- 릴레이션이 제 1정규형이며 부분 함수의 종속성을 제거한 형태
- 부분 함수의 종속성 제거: 기본키가 아닌 모든 속성이 기본키에 **완전 함수 종속**적인 것

> ✔ **완전 함수 종속**(Full Functional Dependency): A와 B가 릴레이션 R의 속성이고 A→B 종속성이 성립할 때, B가 A의 속성 전체에 함수 종속하고 부분 집합 속성에 함수 종속하지 않을 경우

![image](https://user-images.githubusercontent.com/70474860/219867345-1a507eb1-ae64-49bf-a8b6-40c1be2d32f9.png)

![image](https://user-images.githubusercontent.com/70474860/219867349-8e545e9f-103a-4692-b743-0db9317e4f57.png)
